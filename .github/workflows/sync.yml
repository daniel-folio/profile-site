# .github/workflows/sync.yml

name: Sync to B Repository

on:
  push:
    branches:
      - main   # A 저장소의 메인 브랜치

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      # 1. A 저장소 코드를 가져옴
      - name: Checkout A Repo
        uses: actions/checkout@v4

      # 2. SSH 배포키를 사용하여 B 저장소로 Push
      - name: Push to B Repo
        uses: peaceiris/actions-gh-pages@v4
        with:
          deploy_key: ${{ secrets.DEPLOY_KEY_FOR_B }}
          external_repository: daniel-works0001/portfolio
          publish_branch: main
          publish_dir: .
          force_orphan: true

      # 3. Vercel 배포 훅 트리거 (새로 추가된 부분)
      - name: Trigger Vercel Deploy Hook
        run: curl -X POST "${{ secrets.VERCEL_DEPLOY_HOOK_B }}"