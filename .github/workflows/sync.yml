# .github/workflows/sync.yml

name: Sync to B Repository

on:
  push:
    branches:
      - main   # A 저장소의 메인 브랜치

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      # 1. A 저장소 코드를 가져옴
      - name: Checkout A Repo
        uses: actions/checkout@v4

      # 2. SSH 배포키를 사용하여 B 저장소로 Push
      - name: Push to B Repo
        uses: peaceiris/actions-gh-pages@v4
        with:
          # 3단계에서 A 저장소에 등록한 개인키 Secret
          deploy_key: ${{ secrets.DEPLOY_KEY_FOR_B }}
          # B 저장소의 '사용자이름/저장소이름'
          external_repository: daniel-works0001/portfolio
          # B 저장소에 push할 브랜치
          publish_branch: main
          # A 저장소의 모든 내용을 B 저장소에 덮어씀
          publish_dir: .
          # B 저장소의 히스토리를 새로 씀 (미러링을 위해)
          force_orphan: true